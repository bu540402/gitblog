title: c++基础：零散知识点总结
date: 2016-05-12 19:21:33
tags: [c++,c,编程语言]
---

# c++基础：零散知识点总结
[TOC]
## 内联函数
### 内联函数的使用
可以通过在**函数定义**前添加inline关键字对函数进行修饰，则该函数为内联函数。所谓内联函数就是它在程序中每个调用点上都内联的展开。这样就可以**避免函数调用的开销**。一般使得一个函数成为一个内联函数有下面两种方式：
1. 在函数定义前加上inline关键字，例如
```
inline func(int a){ return a;};
```
2. 在类声明中部分定义的函数默认为内联函数，如
```
class A{
  int a;
  public:
    void getA(){return a;};
}
```

### 内联函数的原理
在程序编译阶段，编译器会将程序中出现的内联函数的调用表达式用内联函数的函数体进行替代。但是**编译器在优化内联函数时，必须知道函数定义的内容，这就意味着内联函数的定义和对该函数的调用必须在同一文件中，因此在多文件程序中，每个调用内联函数的文件必须对该函数进行定义**，一般的解决方法就是讲内联函数的定义放在头文件中，并在调用该函数的文件中包含此头文件。

**内联函数的替换发生在编译的哪个阶段？**

### 内联函数的Q&A
1.   内联函数一定会内联展开吗？

  答案是否定的。对于内联函数，程序只是提供了一个“内联建议”，即建议编译器把函数用内联展开，但是真正是否内联，是由编译器决定的。有以下几种情况，内联函数可能会不被替换：
  - 对于函数体过大的函数，编译器一般不会内联，即使制定为内联函数。
  - 在内联函数内部，不允许用循环语句和开关语句（if或switch）。内联函数内部有循环和开关，也不会出错，但是编译器会把它当做非内联函数的。
  - 关键字inline必须与函数定义体放在一起才能使函数真正内联，仅把inline放在函数声明的前面不起任何作用。因为inline是一种用于实现的关键字，不是一种用于声明的关键字。内联函数的声明是不需要加inline关键字的，内联函数的定义是必须加inline的（除了类的定义部分的默认内联函数），尽管很多书声明定义都加了，要注意理解声明和定义的区别。
2. 内联函数一定要定义在头文件中么？
  通常情况下内联函数被定义在头文件中。如果内联函数的声明与定义分开。那么需要在调用该内联函数的.c文件中对该内联函数进行定义。否则在编译时会出现链接失败的错误。
3. 内联函数一定要定义在被调用之前么？
  是的，内联函数的定义必须在第一次调用之前。注意，这里是定义之前，不仅仅是声明之前。对于普通函数，可以在调用之前声明，调用代码之后具体定义（实现函数），但是内联函数要实现内联，必须先定义再调用，否则编译器会把在定义之前调用的内联函数当做普通函数进行调用。
## constexpr 函数
待更新


## 深拷贝
### 什么是深拷贝
### 什么时候需要深拷贝
